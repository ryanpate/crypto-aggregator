{{- $pages := where .Site.RegularPages "Type" "in" (slice "post" "blog" "news") -}}
{{- $limit := 50 -}}
{
  "version": "https://jsonfeed.org/version/1",
  "title": {{ .Site.Title | jsonify }},
  "home_page_url": {{ .Site.BaseURL | jsonify }},
  "feed_url": {{ with .OutputFormats.Get "json" -}}{{ .Permalink | jsonify }}{{- end }},
  "description": {{ .Site.Params.description | jsonify }},
  "items": [
    {{- range $index, $page := first $limit $pages }}
    {{- if $index }},{{ end }}
    {
      "id": {{ .Permalink | jsonify }},
      "url": {{ .Permalink | jsonify }},
      "title": {{ .Title | jsonify }},
      "content_text": {{ .Summary | plainify | jsonify }},
      "content_html": {{ .Summary | jsonify }},
      "date_published": {{ .Date.Format "2006-01-02T15:04:05Z07:00" | jsonify }}
      {{- if .Lastmod }},
      "date_modified": {{ .Lastmod.Format "2006-01-02T15:04:05Z07:00" | jsonify }}
      {{- end }}
      {{- with .Params.author }},
      "author": {
        "name": {{ . | jsonify }}
      }
      {{- end }}
      {{- with .Params.tags }},
      "tags": {{ . | jsonify }}
      {{- end }}
    }
    {{- end }}
  ]
}